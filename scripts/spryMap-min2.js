function SpryMap(a){function d(a,b){var e,f,c=a,d=b;g.lockEdges&&(e=-g.map.offsetWidth+g.viewingBox.offsetWidth,f=-g.map.offsetHeight+g.viewingBox.offsetHeight,c=e>c?e:c,d=f>d?f:d,c=c>0?0:c,d=d>0?0:d),g.map.style.left=c+"px",g.map.style.top=d+"px"}function e(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1)}function f(a,b){this.x=a,this.y=b}var h,i,j,k,b=0,c=0,g=this;g.map=document.getElementById(a.id),g.width="undefined"==typeof a.width?800:a.width,g.height="undefined"==typeof a.height?800:a.height,g.scrolling="undefined"==typeof a.scrolling?!0:a.scrolling,g.hoverCursor=a.hoverCursor||"auto",g.dragCursor=a.dragCursor||"url(data:image/vnd.microsoft.icon;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAAH/AAAB/wAAA/0AAANsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//+AB///wAf//4AH//+AD///yT/////////////////////////////8=), default",g.scrollTime="undefined"==typeof a.scrollTime?300:a.scrollTime,g.lockEdges="undefined"==typeof a.lockEdges?!0:a.lockEdges,g.viewingBox=document.createElement("div"),"undefined"!=typeof a.cssClass&&(g.viewingBox.className=a.cssClass),g.viewingBox.style.cursor=g.hoverCursor,g.mousePosition=new f,g.mouseLocations=[],g.velocity=new f,g.mouseDown=!1,g.timerId=-1,g.timerCount=0,g.map.parentNode.replaceChild(g.viewingBox,g.map),g.viewingBox.appendChild(g.map),g.viewingBox.style.overflow="hidden",g.viewingBox.style.width=g.width+"px",g.viewingBox.style.height=g.height+"px",g.viewingBox.style.position="relative",g.map.style.position="absolute",d("undefined"==typeof a.startX?0:-a.startX,"undefined"==typeof a.startY?0:-a.startY),h=function(a){clientX=a.clientX||a.touches[0].clientX,clientY=a.clientY||a.touches[0].clientY;var b=clientX-g.mousePosition.x+parseInt(g.map.style.left),c=clientY-g.mousePosition.y+parseInt(g.map.style.top);d(b,c),g.mousePosition.x=clientX,g.mousePosition.y=clientY},i=function(){var a,b,c,e;g.mouseDown?(g.mouseLocations.unshift(new f(g.mousePosition.x,g.mousePosition.y)),g.mouseLocations.length>10&&g.mouseLocations.pop()):(a=g.scrollTime/20,b=(a-g.timerCount)/a,c=g.velocity.x*b,e=g.velocity.y*b,d(-c+parseInt(g.map.style.left),-e+parseInt(g.map.style.top)),g.timerCount==a&&(clearInterval(g.timerId),g.timerId=-1),++g.timerCount)},e(g.viewingBox,"mousedown",function(a){j(a)}),e(g.viewingBox,"touchstart",function(a){j(a)}),j=function(a){g.viewingBox.style.cursor=g.dragCursor,g.mousePosition.x=a.clientX,g.mousePosition.y=a.clientY,b=a.clientX,c=a.clientY,e(document,"mousemove",h),e(document,"touchmove",h),g.mouseDown=!0,g.scrolling&&(g.timerCount=0,0!=g.timerId&&(clearInterval(g.timerId),g.timerId=0),g.timerId=setInterval(i,20)),event.preventDefault?event.preventDefault():event.returnValue=!1},e(document,"mouseup",function(a){k(a)}),e(document,"touchend",function(a){k(a)}),k=function(){var b,c;g.mouseDown&&(b=h,document.detachEvent?(document.detachEvent("onmousemove",document["mousemove"+b]),document["mousemove"+b]=null):document.removeEventListener("mousemove",b,!1),g.mouseDown=!1,g.mouseLocations.length>0&&(c=g.mouseLocations.length,g.velocity.x=(g.mouseLocations[c-1].x-g.mouseLocations[0].x)/c,g.velocity.y=(g.mouseLocations[c-1].y-g.mouseLocations[0].y)/c,g.mouseLocations.length=0)),g.viewingBox.style.cursor=g.hoverCursor}}