function SpryMap(a){function b(a,b){var f,g,c=a,d=b;e.lockEdges&&(f=-e.map.offsetWidth+e.viewingBox.offsetWidth,g=-e.map.offsetHeight+e.viewingBox.offsetHeight,c=f>c?f:c,d=g>d?g:d,c=c>0?0:c,d=d>0?0:d),e.map.style.left=c+"px",e.map.style.top=d+"px"}function c(a,b,c){a.attachEvent?(a["e"+b+c]=c,a[b+c]=function(){a["e"+b+c](window.event)},a.attachEvent("on"+b,a[b+c])):a.addEventListener(b,c,!1)}function d(a,b){this.x=a,this.y=b}var f,g,h,i,e=this;e.map=document.getElementById(a.id),e.width="undefined"==typeof a.width?800:a.width,e.height="undefined"==typeof a.height?800:a.height,e.scrolling="undefined"==typeof a.scrolling?!0:a.scrolling,e.hoverCursor=a.hoverCursor||"auto",e.dragCursor=a.dragCursor||"url(data:image/vnd.microsoft.icon;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAAH/AAAB/wAAA/0AAANsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//+AB///wAf//4AH//+AD///yT/////////////////////////////8=), default",e.scrollTime="undefined"==typeof a.scrollTime?300:a.scrollTime,e.lockEdges="undefined"==typeof a.lockEdges?!0:a.lockEdges,e.viewingBox=document.createElement("div"),"undefined"!=typeof a.cssClass&&(e.viewingBox.className=a.cssClass),e.viewingBox.style.cursor=e.hoverCursor,e.mousePosition=new d,e.mouseLocations=[],e.velocity=new d,e.mouseDown=!1,e.timerId=-1,e.timerCount=0,e.map.parentNode.replaceChild(e.viewingBox,e.map),e.viewingBox.appendChild(e.map),e.viewingBox.style.overflow="hidden",e.viewingBox.style.width=e.width+"px",e.viewingBox.style.height=e.height+"px",e.viewingBox.style.position="relative",e.map.style.position="absolute",b("undefined"==typeof a.startX?0:-a.startX,"undefined"==typeof a.startY?0:-a.startY),f=function(a){var c=a.clientX||a.touches[0].clientX,d=a.clientY||a.touches[0].clientY,f=c-e.mousePosition.x+parseInt(e.map.style.left),g=d-e.mousePosition.y+parseInt(e.map.style.top);b(f,g),e.mousePosition.x=c,e.mousePosition.y=d},g=function(){var a,c,f,g;e.mouseDown?(e.mouseLocations.unshift(new d(e.mousePosition.x,e.mousePosition.y)),e.mouseLocations.length>10&&e.mouseLocations.pop()):(a=e.scrollTime/20,c=(a-e.timerCount)/a,f=e.velocity.x*c,g=e.velocity.y*c,b(-f+parseInt(e.map.style.left),-g+parseInt(e.map.style.top)),e.timerCount==a&&(clearInterval(e.timerId),e.timerId=-1),++e.timerCount)},c(e.viewingBox,"mousedown",function(a){h(a)}),c(e.viewingBox,"touchstart",function(a){h(a)}),h=function(a){e.viewingBox.style.cursor=e.dragCursor,e.mousePosition.x=a.clientX,e.mousePosition.y=a.clientY,c(document,"mousemove",f),c(document,"touchmove",f),e.mouseDown=!0,e.scrolling&&(e.timerCount=0,0!=e.timerId&&(clearInterval(e.timerId),e.timerId=0),e.timerId=setInterval(g,20)),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)||/(Android)/i.test(navigator.userAgent)||(event.preventDefault?event.preventDefault():event.returnValue=!1)},c(document,"mouseup",function(a){i(a)}),c(document,"touchend",function(a){i(a)}),i=function(){var b,c;e.mouseDown&&(b=f,document.detachEvent?(document.detachEvent("onmousemove",document["mousemove"+b]),document["mousemove"+b]=null):document.removeEventListener("mousemove",b,!1),e.mouseDown=!1,e.mouseLocations.length>0&&(c=e.mouseLocations.length,e.velocity.x=(e.mouseLocations[c-1].x-e.mouseLocations[0].x)/c,e.velocity.y=(e.mouseLocations[c-1].y-e.mouseLocations[0].y)/c,e.mouseLocations.length=0)),e.viewingBox.style.cursor=e.hoverCursor}}